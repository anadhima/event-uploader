<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Maria's Birthday</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body class="hero">
  <div class="hero-card">
    
    <h1>Mariaâ€™s Birthday</h1>
    <p class="date">26.11.2025</p>

    <!-- DISPOSABLE CAMERA: opens camera instantly -->
    <button class="big-btn" id="cameraHomeBtn">
      <span>ğŸ“¸</span> Disposable Camera
    </button>

    <!-- UPLOAD PHOTO: goes to upload page -->
    <a class="big-btn" href="upload.html">
      <span>ğŸ–¼ï¸</span> Upload Photo
    </a>

    <!-- VIEW GALLERY -->
    <a class="big-btn" href="gallery.html">
      <span>ğŸ‰</span> View Gallery
    </a>

  </div>

  <!-- CAMERA UPLOAD SCRIPT -->
  <script>
    document.getElementById("cameraHomeBtn").addEventListener("click", () => {
      // create hidden file input that triggers the camera
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "image/*";
      input.capture = "environment"; // opens BACK camera on phones
      input.style.display = "none";

      // handle the upload after taking photo
      input.addEventListener("change", () => {
        const file = input.files[0];
        if (!file) return;

        const formData = new FormData();
        formData.append("media", file);
        formData.append("name", "Guest");
        formData.append("caption", "");
        formData.append("consent", "yes");

        fetch("/upload", {
          method: "POST",
          body: formData
        })
        .then(res => res.json())
        .then(json => {
          if (json.ok) {
            alert("Photo uploaded â€” thank you!");
          } else {
            alert("Upload failed: " + json.error);
          }
        })
        .catch(err => alert("Error: " + err));
      });

      document.body.appendChild(input);
      input.click();
    });
  </script>

</body>
</html>
